## OS(Operating System) 개요

### 1. OS(Operating System) 이란
- 운영체제(OS, Operating System)는 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스로 한정된 메모리나 시스템의 자원을 효율적으로 분배해준다
- 응용 프로그래머에게 지저분한 하드웨어의 모습대신 자원의 깨끗한 추상적 모습을 제공하고, 하드웨어 자원들을 관리하는 기능을 제공하는 것이다
- 운영체제 역할
  1. CPU 스케줄링과 프로세스 관리: CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리한다
  2. 메모리 관리: 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 하는지 관리한다
  3. 디스크 파일 관리: 디스크 파일을 어떤 방법으로 보관할지 관리한다
  4. I/O 디바이스 관리: 마우스, 키보드와 같은 I/O 디바이스간에 데이터를 주고 받는 것을 관리한다
- 운영체제 구조
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/f8442bba-fd65-4a43-a1f3-c5ba0e597c00)
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/ca6e4d20-7966-466f-9a41-66a7f739c631)
    - GUI(Graphical user Interface): 사용자가 편리하게 사용하도록 입출력등의 기능을 그래픽으로 구현
    - 커널: 시스템콜 인터페이스를 제공하며 보안, 메모리, 프로세스, 파일 시스템과 I/O관리 등 운영체제의 중추적인 역할을 한다
    - 드라이버: 하드웨어를 제어하기 위한 소프트웨어
  - 시스템콜
    - ![image](https://github.com/kimho1wq/TIL/assets/15611500/9acf384c-4ec4-456e-9b17-6764879ad0a4)
    - 운영체제가 커널에 접근하기 위한 추상화된 인터페이스로, 유저 프로그램이 운영체제의 서비스를 받기 위해 시스템콜을 통해 커널에 접근한다
    - 유저 프로그램의 I/O 디바이스 등과 같은 컴퓨터 자원에 대한 직접 접근을 차단하고 보호할 수 있다


### 2. 컴퓨터 하드웨어
- 컴퓨터의 요소
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/d268734a-2e08-4d55-9ca1-2c0a955ecfea)
- CPU(Central Processing Unit)
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/fd063350-f968-4cf1-b592-beba4a79a3f4)
  - 산술논리연산장치, 제어장치, 레지스터로 구성되어 있는 컴퓨터 장치로, 메모리에 존재하는 명령어를 해석해서 실행한다
  - 파이프라인 구조(fetch, decode, execute)로 명령어를 실행한다
    - ![image](https://github.com/kimho1wq/TIL/assets/15611500/beb30dda-3d5e-4519-abff-73db0cac7f61)
  - 제어장치(CU, Control Unit)는 I/O장치의 통신을 제어하고 명령어들을 읽고 해석하며 데이터 처리를 위한 순서를 결정한다
  - 레지스터(Register)는 CPU 안에 있는 임시기억장치로 메모리보다 훨씬 빠르다
    - 프로그램 카운터(PC, program counter=instruct pointer)는 다음 명령의 메모리 주소를 포함하고 있는 레지스터
    - 스택 포인터는 메모리에 있는 현 스택의 최상위를 기리키는 레지스터
    - PWS(Program Status Wrod)는 비교 연산자들에 의해 설정되는 조건 코드 비트, CPU의 우선 순위, 사용자 또는 커널 모드 여부, 다를 각종 제어 비트를 포함하고 있는 레지스터
  - 산술논리연산장치(ALU, Arithmetic Logic Unit)는 산술 연산(덧셈,뺄셈 등)과 논리 연산(배타적 논리합,논리곱 등)을 계산하는 디지털 회로이다
  - 관리자 역할을 하는 운영체제의 커널이 프로그램을 메모리에 올려 프로세스를 생성하면 이를 CPU가 처리한다
  - 인터럽트(interrupt)
    - 어떤 신호가 들어왔을 때 CPU를 잠깐 정지시키는 것을 의미하며, 인터럽트가 발생되면 이를 처리하기 위한 인터럽트 핸들러 함수가 실행된다
    - I/O 디바이스 등에서 발생하는 하드웨어 인터럽트와 프로세스 오류 등으로 시스템콜을 호출할 때 발생하는 소프트웨어 인터럽트로 나뉜다
- DMA(Direct Memory Access) 컨트롤러
  - I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치를 의미한다
  - 과도한 인터럽트에 대한 CPU 부하를 막아 주며, 하나의 작업을 CPU와 DMA 컨트롤러가 동시에 수행하지 않는다
  - CPU는 바이트 이동량, 관련 장치와 메모리 주소, 방향 등을 DMA 칩에 설정하여 CPU의 계속적인 개입 없이 I/O를 진행시킨다
- 메모리(Memory)
  - 데이터나 명령어 등을 기록하는 기록 장치를 의미하고, 메인 메모리인 RAM(Random Access Memory)를 보통 메모리라고 부른다
  - ROM(Read Only Memory)는 내용물을 바꿀수 없는 비휘발성 메모리로 컴퓨터를 시작할 때 사용하는 부트스트램 로더(bootstrap loader)가 존재 할 수 있다
  - EEPROM(Electrically Erasable PROM)과 플레쉬 메모리(Flash Memory)도 비휘발성 메모리지만 ROM과 달리 지우고 쓰기를 할 수 있다
  - CMOS 메모리는 휘발성이지만 전력 소비가 적기 때문에 많은 컴퓨터에서 현 시간과 날짜를 저장해 두기 위해 사용하고 있다
  - 디스크(Disk)는 기계적인 장치이기 때문에 훨씬 속도가 느리다
- 타이머(Timer): 특정 프로그램에 시간 제한을 걸기 위해 사용된다
- 디바이스 컨트롤러(device controller)
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/9b098d47-3c6f-47e7-a20b-8d1e198c715b)
  - I/O 디바이스와 연결되어 있는 작은 CPU를 의미하고, 각 디바이스에 대한 데이터를 임시로 저장하기 위한 버퍼도 존재한다
  - 컨트롤러는 칩의 집합으로 운영체제의 명령을 받아드려 장치를 물리적으로 조종하며, 운영체제에게 조종하기 위한 간단한 인터페이스를 제공한다
- 장치 드라이버(device driver)
  - 각 컨트롤러의 종류가 다르기 때문에 각각에게 명령을 보내고 응답을 받는 소프트웨어를 의미한다
  - 일운영체제 내에 설치되며 일반적으로 커널 모드에서 동작한다
- 버스(bus)
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/4c575543-0e9f-4f06-9fb5-1e21dcd7d068)
  - ISA(Industry Standard Architecture): 오래되고 느린 I/O카드들의 하위 호환성을 위해 존재하는 버스
  - PCI(Peripheral Component Interconnect): 고속 I/O 장치들이 사용하는 버스
  - USB(Universal Serial Bus): 키보드나 마우스와 같은 느린 I/O 장치들을 연결하기 위한 버스
  - SCSI(Small Computer System Interface): 빠른 디스크와 같은 상당한 대역폭(bandwidth)를 필요로 하는 장치들을 연결하기 위한 버스
- 컴퓨터 부팅하기
  - 부모보드(parentboard)에 시스템 BIOS(Basic Input Output System)를 시작
  - BIOS는 키보드를 읽고, 화면에 쓰고, 디스크 I/O를 하는 함수를 포함하는 저수준 소프트웨어이다
  - BIOS는 CMOS 메모리에 있는 장치들의 목록을 보고 부트 장치를 결정한다
  - 부트 장치의 첫 섹터를 읽어서 메모리에 올려 놓고 실행시키고 부 전째 부트 로더를 읽어 들인다
  - 이 로더가 운영체제를 읽어들이고 운영체제는 모든 장치 드라이버들을 커널에 적제하고 필요한 백그라운드 프로세스들을 생성하며 GUI를 시작한다


### 3. 시스템 호출
- 시스템 호출 과정
  - read(파일, 버퍼, 바이트 수) 함수 호출 하기
  - ![image](https://github.com/kimho1wq/TIL/assets/15611500/27c32ad0-bf5f-423e-a109-3acb4db4741d)
  1. read 라이브러리 힘수를 부르기 위한 준비로 인자들을 스택에 푸시해 둔다
  2. 라이브러리 함수에 대한 실제 호출이 일어난다
  3. 특정 레지스터에 시스템 호출 번호를 넣어 둔다
  4. TRAP 명령을 실행하여 유저 모드에서 커널 모드로 전환하고 커널의 특정 위치에서 실행을 시작한다
  5. 테이블에서 시스템 호출 번호를 확인하여 적절한 시스템 호출 핸들러(system call handler)를 실행한다
  6. 시스템 호출 핸들러의 실행이 완료되면 사용자 영역 라이브러리 함수 쪽으로 제어권을 넘긴다
  7. 이 라이브러리 함수에서 사용자 프로그램에게로 반환된다
  8. 사용자 프로그램은 함수 호출을 마루리 하고 스택을 정리한다(스택 포인터 증가)





                                     















          